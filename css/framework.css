/* ==========================================================================
   CSS Custom Properties for Animation (must be at top level)
   ========================================================================== */

@property --gradient-opacity {
    syntax: '<number>';
    inherits: false;
    initial-value: 0;
}

@property --gradient-border-color {
    syntax: '<color>';
    inherits: false;
    initial-value: #e2e8f0;
}

@property --gradient-border-color--dark {
    syntax: '<color>';
    inherits: false;
    initial-value: #334155;
}

/* ==========================================================================
   Modern UI Framework
   ========================================================================== */

/* ==========================================================================
   Modern UI Framework
   A clean, modern CSS framework for SaaS applications
   Tailwind UI / shadcn inspired design with animated gradients

   Table of Contents:
   1. CSS Custom Properties (Design Tokens)
   2. Reset & Base Styles
   3. Typography
   4. Form Controls
   5. Buttons
   6. Alerts
   7. Utilities
   ========================================================================== */

/* ==========================================================================
   1. CSS CUSTOM PROPERTIES (DESIGN TOKENS)
   All customizable values in one place for easy theming
   ========================================================================== */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Plus+Jakarta+Sans:wght@500;600;700;800&display=swap');

:root {
    /* ---------------------------------------------------------------------
       Color Palette

       Customize your theme by overriding these RGB values:
       --color-primary-rgb, --color-secondary-rgb, --color-tertiary-rgb

       All colors and variants are auto-generated from these.
       --------------------------------------------------------------------- */
    --color-primary-rgb: 99, 102, 241;
    --color-primary: rgb(var(--color-primary-rgb));
    --color-primary-400: color-mix(in srgb, var(--color-primary) 65%, white);
    --color-primary-600: color-mix(in srgb, var(--color-primary) 75%, black);

    --color-secondary-rgb: 236, 72, 153;
    --color-secondary: rgb(var(--color-secondary-rgb));
    --color-secondary-400: color-mix(in srgb, var(--color-secondary) 65%, white);
    --color-secondary-600: color-mix(in srgb, var(--color-secondary) 75%, black);

    --color-tertiary-rgb: 245, 158, 11;
    --color-tertiary: rgb(var(--color-tertiary-rgb));
    --color-tertiary-200: color-mix(in srgb, var(--color-tertiary) 30%, white);
    --color-tertiary-400: color-mix(in srgb, var(--color-tertiary) 65%, white);
    --color-tertiary-600: color-mix(in srgb, var(--color-tertiary) 75%, black);

    --color-success: #22c55e;
    --color-success-dark: #16a34a;

    --color-warning: #f59e0b;
    --color-warning-dark: #d97706;

    --color-error: #ef4444;
    --color-error-dark: #dc2626;

    --color-info: #3b82f6;
    --color-info-dark: #2563eb;

    /* ---------------------------------------------------------------------
       Surface & Border Colors
       --------------------------------------------------------------------- */
    --color-background: #ffffff;
    --color-surface: #f8fafc;
    --color-surface-alt: #f1f5f9;
    --color-border: #e2e8f0;
    --color-border-light: #f1f5f9;
    --color-border-hover: #cbd5e1;
    --color-focus: #6366f1;

    /* ---------------------------------------------------------------------
       Font Colors
       --------------------------------------------------------------------- */
    --font-color-heading: #0f172a;
    --font-color-body: #334155;
    --font-color-caption: #64748b;
    --font-color-link: var(--color-primary);
    --font-color-link-hover: var(--color-primary-600);

    /* ---------------------------------------------------------------------
       Font Families
       --------------------------------------------------------------------- */
    --font-heading: 'Plus Jakarta Sans', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-body: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --font-mono: ui-monospace, SFMono-Regular, 'SF Mono', Menlo, Consolas, 'Liberation Mono', monospace;

    /* ---------------------------------------------------------------------
       Font Sizes (Modular Scale 1.25)
       --------------------------------------------------------------------- */
    --text-xs: 0.75rem;
    --text-sm: 0.875rem;
    --text-base: 1rem;
    --text-lg: 1.125rem;
    --text-xl: 1.25rem;
    --text-2xl: 1.5rem;
    --text-3xl: 1.875rem;
    --text-4xl: 2.25rem;
    --text-5xl: 3rem;
    --text-6xl: 3.75rem;

    /* ---------------------------------------------------------------------
       Line Heights
       --------------------------------------------------------------------- */
    --leading-none: 1;
    --leading-tight: 1.25;
    --leading-snug: 1.375;
    --leading-normal: 1.5;
    --leading-relaxed: 1.625;
    --leading-loose: 2;

    /* ---------------------------------------------------------------------
       Font Weights
       --------------------------------------------------------------------- */
    --font-light: 300;
    --font-normal: 400;
    --font-medium: 500;
    --font-semibold: 600;
    --font-bold: 700;
    --font-extrabold: 800;

    /* ---------------------------------------------------------------------
       Letter Spacing
       --------------------------------------------------------------------- */
    --tracking-tighter: -0.05em;
    --tracking-tight: -0.025em;
    --tracking-normal: 0;
    --tracking-wide: 0.025em;
    --tracking-wider: 0.05em;
    --tracking-widest: 0.1em;

    /* ---------------------------------------------------------------------
       Spacing Scale
       --------------------------------------------------------------------- */
    --space-0: 0;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;
    --space-12: 3rem;
    --space-16: 4rem;

    /* ---------------------------------------------------------------------
       Border Radius
       --------------------------------------------------------------------- */
    --radius-sm: 0.25rem;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.625rem;
    --radius-full: 9999px;

    /* ---------------------------------------------------------------------
       Transitions
       --------------------------------------------------------------------- */
    --transition-fast: 0.15s ease;
    --transition-base: 0.2s ease;
    --transition-slow: 0.3s ease;
    --transition-gradient: 0.4s ease-in-out;
    --easing-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    --easing-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
    --easing-apple: cubic-bezier(0.25, 0.1, 0.25, 1);

    /* ---------------------------------------------------------------------
       Shadows / Elevation System
       --------------------------------------------------------------------- */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);

    /* Elevation tokens for consistent depth */
    --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.06);
    --elevation-2: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.05);
    --elevation-3: 0 10px 20px rgba(0, 0, 0, 0.1), 0 6px 6px rgba(0, 0, 0, 0.06);
    --elevation-4: 0 14px 28px rgba(0, 0, 0, 0.12), 0 10px 10px rgba(0, 0, 0, 0.08);

    /* ---------------------------------------------------------------------
       Disabled State
       --------------------------------------------------------------------- */
    --disabled-opacity: 0.38;
    --color-disabled-bg: #cbd5e1;
    --color-disabled-border: #94a3b8;
    --color-disabled-text: #64748b;

    /* ---------------------------------------------------------------------
       Component-Specific Tokens
       --------------------------------------------------------------------- */

    /* Buttons */
    --btn-font-size: var(--text-sm);
    --btn-font-weight: var(--font-medium);
    --btn-padding-x: var(--space-4);
    --btn-padding-y: 0.625rem;
    --btn-radius: var(--radius-lg);

    /* Alerts */
    --alert-font-size: var(--text-sm);
    --alert-padding-x: var(--space-4);
    --alert-padding-y: 0.875rem;
    --alert-radius: var(--radius-lg);
    --alert-border-width: 2px;

    /* Form Controls */
    --input-font-size: var(--text-base);
    --input-padding-x: var(--space-4);
    --input-padding-y: var(--space-3);
    --input-radius: var(--radius-lg);
    --input-border-width: 2px;
}

/* ==========================================================================
   DARK MODE
   Applied via class="dark" on <html> or <body>.
   Use JS to detect system preference and apply the class.
   ========================================================================== */

/* Dark mode class */
.dark {
    /* Surface & Border Colors */
    --color-background: #0f172a;
    --color-surface: #151e2e;
    --color-surface-alt: #1e293b;
    --color-input-background: color(srgb 0.0604 0.0911 0.1663);
    --color-border: #334155;
    --color-border-light: #1e293b;
    --color-border-hover: #475569;

    /* Font Colors */
    --font-color-heading: #f1f5f9;
    --font-color-body: #cbd5e1;
    --font-color-caption: #94a3b8;
    --font-color-link: var(--color-primary-400);
    --font-color-link-hover: var(--color-primary);

    /* Adjusted shadows for dark mode */
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);

    /* Dark mode elevation tokens */
    --elevation-1: 0 1px 3px rgba(0, 0, 0, 0.24), 0 1px 2px rgba(0, 0, 0, 0.18);
    --elevation-2: 0 4px 6px rgba(0, 0, 0, 0.22), 0 2px 4px rgba(0, 0, 0, 0.16);
    --elevation-3: 0 10px 20px rgba(0, 0, 0, 0.28), 0 6px 6px rgba(0, 0, 0, 0.2);
    --elevation-4: 0 14px 28px rgba(0, 0, 0, 0.32), 0 10px 10px rgba(0, 0, 0, 0.24);
}

.dark code {
    background-color: var(--color-surface);
}

.dark pre {
    background-color: var(--color-surface);
}

.dark th {
    background-color: var(--color-surface);
}

.dark table.striped tbody tr:nth-child(even) {
    background-color: var(--color-surface);
}

.dark .action-chip {
    background: var(--color-surface);
}

.dark .action-chip:hover {
    background: var(--color-background);
}

.dark input,
.dark textarea,
.dark select {
    background-color: var(--color-input-background);
}

/* Hollow inputs in dark mode - use input background for the padding-box layer */
.dark input.hollow,
.dark textarea.hollow,
.dark select.hollow {
    background:
        linear-gradient(var(--color-input-background), var(--color-input-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
}

/* Gradient inputs in dark mode - must use rgba with opacity variable for smooth fade */
.dark input.gradient,
.dark textarea.gradient,
.dark select.gradient {
    background-color: var(--color-input-background);
    background-image:
        linear-gradient(var(--color-input-background), var(--color-input-background)),
        linear-gradient(
            135deg,
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-tertiary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity))
        );
}

.dark input[type="checkbox"].toggle {
    background-color: var(--color-surface-alt);
}

/* Dark mode gradient checkboxes and radio buttons */
.dark input[type="checkbox"].gradient,
.dark input[type="radio"].gradient {
    background:
        linear-gradient(var(--color-input-background), var(--color-input-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
}

.dark input[type="checkbox"].gradient.secondary,
.dark input[type="radio"].gradient.secondary {
    background:
        linear-gradient(var(--color-input-background), var(--color-input-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
}



.dark .card, .dark section {
    background-color: var(--color-surface);
    border-color: var(--color-border);
}

.dark kbd {
    background-color: var(--color-surface);
    border-color: var(--color-border);
}

.dark blockquote {
    background-color: var(--color-surface);
}

.dark input[type="file"]::file-selector-button {
    background-color: var(--color-surface-alt);
    color: var(--font-color-body);
}



/* Dark mode hollow gradient buttons - use indigo background for better contrast */
.dark .btn.hollow.gradient {
    --color-background: #1e1b4b;
    color: #e0e7ff;
}

/* ==========================================================================
   2. RESET & BASE STYLES
   ========================================================================== */

*,
*::before,
*::after {
    box-sizing: border-box;
}

html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-kerning: normal;
}

body {
    margin: 0;
    font-family: var(--font-body);
    font-size: var(--text-base);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    letter-spacing: var(--tracking-normal);
    font-feature-settings: 'kern' 1, 'liga' 1;
    background-color: var(--color-background);
    color: var(--font-color-body);
}

/* ==========================================================================
   3. TYPOGRAPHY
   ========================================================================== */

/* ---------------------------------------------------------------------
   Headings
   --------------------------------------------------------------------- */

h1, h2, h3, h4, h5, h6 {
    margin-top: 0;
    font-family: var(--font-heading);
    font-weight: var(--font-bold);
    line-height: var(--leading-tight);
    letter-spacing: var(--tracking-tight);
    font-kerning: normal;
    font-feature-settings: 'kern' 1, 'liga' 1, 'calt' 1;
    color: var(--font-color-heading);
}

h1 {
    margin-bottom: var(--space-6);
    font-size: var(--text-4xl);
    font-weight: var(--font-extrabold);
    letter-spacing: var(--tracking-tighter);
    line-height: var(--leading-none);
}

h2 {
    margin-bottom: var(--space-5);
    font-size: var(--text-3xl);
    letter-spacing: var(--tracking-tight);
}

h3 {
    margin-bottom: var(--space-4);
    font-size: var(--text-2xl);
    font-weight: var(--font-semibold);
}

h4 {
    margin-bottom: var(--space-3);
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
}

h5 {
    margin-bottom: var(--space-3);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
}

h6 {
    margin-bottom: var(--space-2);
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
}

/* ---------------------------------------------------------------------
   Body Text
   --------------------------------------------------------------------- */

p {
    margin-top: 0;
    margin-bottom: var(--space-4);
    line-height: var(--leading-relaxed);
}

p:last-child {
    margin-bottom: 0;
}

.lead {
    font-size: var(--text-lg);
    line-height: var(--leading-relaxed);
}

small,
.text-sm {
    font-size: var(--text-sm);
    line-height: var(--leading-normal);
}

.text-xs {
    font-size: var(--text-xs);
    line-height: var(--leading-normal);
}

/* ---------------------------------------------------------------------
   Links
   --------------------------------------------------------------------- */

a {
    color: var(--font-color-link);
    text-decoration: none;
    transition: color var(--transition-fast) var(--easing-apple);
}

a:hover {
    color: var(--font-color-link-hover);
    text-decoration: underline;
}

a:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 2px;
    border-radius: 2px;
}

/* Gradient animated link */
a.gradient {
    background: linear-gradient(
        135deg,
        var(--color-primary),
        var(--color-secondary),
        var(--color-primary-400),
        var(--color-tertiary),
        var(--color-primary)
    );
    background-size: 300% 300%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-decoration: none;
    border-bottom: 2px solid var(--color-primary);
    padding-bottom: 2px;
    animation: gradient-shift 6s ease infinite;
    transition: border-color var(--transition-fast);
}

a.gradient:hover {
    animation: gradient-shift 2s ease infinite;
    border-bottom-color: var(--color-secondary);
}

a.gradient.secondary {
    background: linear-gradient(
        135deg,
        var(--color-secondary),
        var(--color-tertiary),
        var(--color-secondary-400),
        var(--color-primary-400),
        var(--color-secondary)
    );
    background-size: 300% 300%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    border-bottom-color: var(--color-secondary);
}

a.gradient.secondary:hover {
    border-bottom-color: var(--color-tertiary);
}

/* ---------------------------------------------------------------------
   Lists
   --------------------------------------------------------------------- */

ul, ol {
    margin-top: 0;
    margin-bottom: var(--space-4);
    padding-left: var(--space-6);
    line-height: var(--leading-relaxed);
}

ul ul, ol ol, ul ol, ol ul {
    margin-bottom: 0;
}

li {
    margin-bottom: var(--space-2);
}

li:last-child {
    margin-bottom: 0;
}

/* ---------------------------------------------------------------------
   Inline Elements
   --------------------------------------------------------------------- */

strong, b {
    font-weight: var(--font-semibold);
    color: var(--font-color-heading);
}

em, i {
    font-style: italic;
}

mark {
    padding: 0.125em 0.25em;
    border-radius: var(--radius-sm);
    background-color: #fef08a;
}

del, s {
    text-decoration: line-through;
    opacity: 0.7;
}

/* ---------------------------------------------------------------------
   Code
   --------------------------------------------------------------------- */

code, kbd, samp, pre {
    font-family: var(--font-mono);
    font-size: 0.875em;
}

code {
    padding: 0.125em 0.375em;
    border-radius: var(--radius-sm);
    background-color: var(--color-surface-alt);
    color: var(--font-color-heading);
}

pre {
    margin-top: 0;
    margin-bottom: var(--space-4);
    padding: var(--space-4);
    border-radius: var(--radius-lg);
    overflow-x: auto;
    line-height: var(--leading-relaxed);
    background-color: var(--color-surface-alt);
}

pre code {
    padding: 0;
    font-size: inherit;
    background: none;
}

kbd {
    padding: 0.125em 0.5em;
    border-radius: var(--radius-sm);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    background-color: var(--font-color-heading);
    color: #ffffff;
}

/* ---------------------------------------------------------------------
   Blockquote
   --------------------------------------------------------------------- */

blockquote {
    margin: 0 0 var(--space-4) 0;
    padding: var(--space-4) var(--space-6);
    border-left: 4px solid var(--color-primary);
    border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
    font-style: italic;
    background-color: var(--color-surface);
}

blockquote p:last-child {
    margin-bottom: 0;
}

blockquote cite {
    display: block;
    margin-top: var(--space-3);
    font-size: var(--text-sm);
    font-style: normal;
    color: var(--font-color-caption);
}

blockquote cite::before {
    content: 'â€” ';
}

/* ---------------------------------------------------------------------
   Definition Lists
   Great for key-value displays, settings, details panels
   --------------------------------------------------------------------- */

dl {
    margin: 0 0 var(--space-4) 0;
}

dt {
    font-weight: var(--font-semibold);
    color: var(--font-color-heading);
    margin-bottom: var(--space-1);
}

dd {
    margin: 0 0 var(--space-4) 0;
    color: var(--font-color-body);
}

dd:last-child {
    margin-bottom: 0;
}

/* Horizontal layout - key and value on same line */
dl.horizontal {
    display: grid;
    grid-template-columns: minmax(8rem, auto) 1fr;
    gap: var(--space-2) var(--space-4);
    align-items: baseline;
}

dl.horizontal dt {
    margin-bottom: 0;
    color: var(--font-color-caption);
    font-weight: var(--font-medium);
}

dl.horizontal dd {
    margin-bottom: 0;
}

/* Bordered variant */
dl.bordered {
    border-top: 1px solid var(--color-border);
}

dl.bordered dt {
    padding-top: var(--space-3);
    padding-bottom: var(--space-1);
    font-weight: var(--font-semibold);
}

dl.bordered dd {
    padding-bottom: var(--space-3);
    margin-bottom: 0;
    border-bottom: 1px solid var(--color-border);
}

/* ---------------------------------------------------------------------
   Horizontal Rule
   --------------------------------------------------------------------- */

hr {
    margin: var(--space-8) 0;
    border: none;
    border-top: 1px solid var(--color-border);
}

/* ---------------------------------------------------------------------
   Tables - Base
   --------------------------------------------------------------------- */

table {
    width: 100%;
    margin-bottom: var(--space-4);
    font-size: var(--text-sm);
    border-collapse: collapse;
    border-radius: var(--radius-lg);
    overflow: hidden;
}

th {
    padding: var(--space-3) var(--space-4);
    font-family: var(--font-body);
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-align: left;
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
    border-bottom: 2px solid var(--color-border);
    color: var(--font-color-caption);
    background-color: var(--color-surface);
}

td {
    padding: var(--space-3) var(--space-4);
    border-bottom: 1px solid var(--color-border-light);
    color: var(--font-color-body);
}

tr:last-child td {
    border-bottom: none;
}

/* ---------------------------------------------------------------------
   Table Variants
   --------------------------------------------------------------------- */

/* Hoverable rows */
table.hoverable tbody tr {
    transition: background-color var(--transition-fast);
}

table.hoverable tbody tr:hover {
    background-color: var(--color-surface);
}

/* Striped rows */
table.striped tbody tr:nth-child(even) {
    background-color: var(--color-surface-alt);
}

table.striped.hoverable tbody tr:hover {
    background-color: var(--color-border-light);
}

/* Compact table */
table.compact th,
table.compact td {
    padding: var(--space-2) var(--space-3);
}

/* Relaxed table */
table.relaxed th,
table.relaxed td {
    padding: var(--space-4) var(--space-5);
}

/* ---------------------------------------------------------------------
   Sortable Column Headers with Gradient Pill
   --------------------------------------------------------------------- */

th .th-content {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
}

th .th-content.sortable {
    cursor: pointer;
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-full);
    transition: background-color var(--transition-fast);
}

th .th-content.sortable:hover {
    background-color: var(--color-surface-alt);
}

th .th-content.sortable.gradient {
    background: linear-gradient(
        135deg,
        var(--color-primary),
        var(--color-secondary),
        var(--color-primary-400),
        var(--color-primary)
    );
    background-size: 300% 300%;
    animation: gradient-shift 6s ease infinite;
    color: #ffffff;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

th .th-content.sortable.gradient:hover {
    animation: gradient-shift 3s ease infinite;
}

th .th-content.sortable.gradient.secondary {
    background: linear-gradient(
        135deg,
        var(--color-secondary),
        var(--color-tertiary),
        var(--color-secondary-400),
        var(--color-secondary)
    );
    background-size: 300% 300%;
}

/* Sort indicators */
th .sort-icon {
    width: 0.875rem;
    height: 0.875rem;
    opacity: 0.5;
    transition: opacity var(--transition-fast), transform var(--transition-fast);
}

th .th-content.sortable:hover .sort-icon {
    opacity: 0.8;
}

th .th-content.sorted .sort-icon {
    opacity: 1;
}

th .th-content.sorted.desc .sort-icon {
    transform: rotate(180deg);
}

/* Chevron icons via CSS */
th .sort-icon::before {
    content: '';
    display: block;
    width: 100%;
    height: 100%;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='currentColor'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 15l7-7 7 7'/%3e%3c/svg%3e");
    background-size: contain;
    background-repeat: no-repeat;
}

th .th-content.sortable.gradient .sort-icon::before {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='white'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 15l7-7 7 7'/%3e%3c/svg%3e");
}

/* ---------------------------------------------------------------------
   Table with Hollow Style (gradient border)
   --------------------------------------------------------------------- */

table.hollow {
    border: 2px solid transparent;
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 6s ease infinite;
    box-shadow: 0 0 12px -4px rgba(var(--color-primary-rgb), 0.3), 0 0 20px -4px rgba(var(--color-secondary-rgb), 0.15);
}

table.hollow th {
    background-color: transparent;
    border-bottom: 1px solid var(--color-border-light);
}

table.hollow.secondary {
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    box-shadow: 0 0 12px -4px rgba(var(--color-secondary-rgb), 0.3), 0 0 20px -4px rgba(var(--color-tertiary-rgb), 0.15);
}

/* ---------------------------------------------------------------------
   Table Status Cells
   --------------------------------------------------------------------- */

td.status-success {
    color: var(--color-success);
    font-weight: var(--font-medium);
}

td.status-warning {
    color: var(--color-warning);
    font-weight: var(--font-medium);
}

td.status-error {
    color: var(--color-error);
    font-weight: var(--font-medium);
}

td.status-info {
    color: var(--color-info);
    font-weight: var(--font-medium);
}

/* Status badges in cells */
.table-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.5rem;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    border-radius: var(--radius-full);
}

.table-badge.success {
    background-color: rgba(34, 197, 94, 0.1);
    color: var(--color-success);
}

.table-badge.warning {
    background-color: rgba(var(--color-tertiary-rgb), 0.1);
    color: var(--color-warning);
}

.table-badge.error {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--color-error);
}

.table-badge.info {
    background-color: rgba(59, 130, 246, 0.1);
    color: var(--color-info);
}





/* ---------------------------------------------------------------------
   Icon-Only Action Buttons
   --------------------------------------------------------------------- */

.btn-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    padding: 0;
    border: none;
    border-radius: var(--radius-md);
    background: transparent;
    color: var(--color-text-muted);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-icon:hover {
    background: var(--color-surface);
    color: var(--color-text);
}

.btn-icon:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
}

.btn-icon svg {
    width: 1.125rem;
    height: 1.125rem;
    flex-shrink: 0;
}

/* Icon button variants */
.btn-icon.danger:hover {
    background: color-mix(in srgb, var(--color-error) 15%, transparent);
    color: var(--color-error);
}

.btn-icon.primary:hover {
    background: color-mix(in srgb, var(--color-primary) 15%, transparent);
    color: var(--color-primary);
}

.btn-icon.success:hover {
    background: color-mix(in srgb, var(--color-success) 15%, transparent);
    color: var(--color-success);
}

/* Small icon button */
.btn-icon.sm {
    width: 1.5rem;
    height: 1.5rem;
}

.btn-icon.sm svg {
    width: 0.875rem;
    height: 0.875rem;
}

/* ---------------------------------------------------------------------
   Action Chips (pill-shaped quick actions)
   --------------------------------------------------------------------- */

.action-chip {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.25rem 0.75rem;
    font-size: var(--text-xs);
    font-weight: 500;
    border: 1px solid var(--color-border);
    border-radius: 9999px;
    background: var(--color-background);
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: all var(--transition-fast);
    white-space: nowrap;
}

.action-chip:hover {
    background: var(--color-surface);
    border-color: var(--color-border-strong);
    color: var(--color-text);
}

.action-chip:focus-visible {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
}

.action-chip svg {
    width: 0.875rem;
    height: 0.875rem;
    flex-shrink: 0;
}

/* Action chip variants */
.action-chip.primary {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.action-chip.primary:hover {
    background: color-mix(in srgb, var(--color-primary) 10%, transparent);
}

.action-chip.danger {
    border-color: var(--color-error);
    color: var(--color-error);
}

.action-chip.danger:hover {
    background: color-mix(in srgb, var(--color-error) 10%, transparent);
}

.action-chip.success {
    border-color: var(--color-success);
    color: var(--color-success);
}

.action-chip.success:hover {
    background: color-mix(in srgb, var(--color-success) 10%, transparent);
}



/* ==========================================================================
   NAVBAR COMPONENT
   ========================================================================== */

/* ---------------------------------------------------------------------
   Base Navbar Styles
   --------------------------------------------------------------------- */

.navbar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-6);
    min-height: 4rem;
    width: 100%;
}

/* Mobile navbar: two-row layout */
@media (max-width: 640px) {
    .navbar {
        display: grid;
        grid-template-columns: 1fr auto;
        grid-template-rows: auto auto;
        grid-template-areas:
            "logo buttons"
            "menu menu";
        padding: var(--space-2) var(--space-4);
        min-height: auto;
        gap: var(--space-2);
    }

    .navbar-left {
        grid-area: logo;
    }

    .navbar-right {
        grid-area: buttons;
    }

    .navbar-center {
        grid-area: menu;
        width: 100%;
        justify-content: flex-start;
        padding: var(--space-2) 0;
    }
}

.navbar-left,
.navbar-center,
.navbar-right {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    flex-shrink: 0;
}

.navbar-left {
    justify-content: flex-start;
}

.navbar-center {
    justify-content: center;
    flex: 1;
    min-width: 0;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-snap-type: x mandatory;
    -webkit-scroll-snap-type: x mandatory;
    scroll-padding: 0 var(--space-4);
}

.navbar-center::-webkit-scrollbar {
    display: none;
}

.navbar-right {
    justify-content: flex-end;
}

/* Navbar brand/logo */
.navbar-brand {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-family: var(--font-heading);
    font-size: var(--text-lg);
    font-weight: var(--font-bold);
    text-decoration: none;
    color: inherit;
}

.navbar-brand:hover {
    text-decoration: none;
}

.navbar-brand img,
.navbar-brand svg {
    height: 2rem;
    width: auto;
}

/* Navbar links */
.navbar-nav {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    list-style: none;
    margin: 0;
    padding: 0;
}

.navbar-nav li {
    margin-bottom: 0;
    flex-shrink: 0;
    scroll-snap-align: start;
    -webkit-scroll-snap-align: start;
}

.navbar-nav a,
.nav-link {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-3);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    text-decoration: none;
    border-radius: var(--radius-md);
    transition: background-color var(--transition-fast), color var(--transition-fast);
}

.navbar-nav a:hover,
.nav-link:hover {
    text-decoration: none;
}

.navbar-nav a.active,
.nav-link.active {
    font-weight: var(--font-semibold);
}

/* Navbar actions (buttons, icons) */
.navbar-actions {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

/* ---------------------------------------------------------------------
   Light Navbar (Default)
   --------------------------------------------------------------------- */

.navbar.light,
.navbar {
    background-color: var(--color-background);
    border-bottom: 1px solid var(--color-border-light);
    color: var(--font-color-body);
}

.navbar.light .navbar-brand,
.navbar .navbar-brand {
    color: var(--font-color-heading);
}

.navbar.light .navbar-nav a,
.navbar.light .nav-link,
.navbar .navbar-nav a,
.navbar .nav-link {
    color: var(--font-color-body);
}

.navbar.light .navbar-nav a:hover,
.navbar.light .nav-link:hover,
.navbar .navbar-nav a:hover,
.navbar .nav-link:hover {
    background-color: var(--color-surface);
    color: var(--font-color-heading);
}

.navbar.light .navbar-nav a.active,
.navbar.light .nav-link.active,
.navbar .navbar-nav a.active,
.navbar .nav-link.active {
    background-color: var(--color-surface-alt);
    color: var(--color-primary);
}

/* ---------------------------------------------------------------------
   Dark Navbar
   --------------------------------------------------------------------- */

.navbar.dark {
    background-color: #0f172a;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    color: #e2e8f0;
}

.navbar.dark .navbar-brand {
    color: #ffffff;
}

.navbar.dark .navbar-nav a,
.navbar.dark .nav-link {
    color: #cbd5e1;
}

.navbar.dark .navbar-nav a:hover,
.navbar.dark .nav-link:hover {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff;
}

.navbar.dark .navbar-nav a.active,
.navbar.dark .nav-link.active {
    background-color: rgba(255, 255, 255, 0.15);
    color: #ffffff;
}

/* Dark navbar button overrides */
.navbar.dark .btn.hollow {
    --color-background: #0f172a;
    border-color: rgba(255, 255, 255, 0.3);
    color: #ffffff;
}

.navbar.dark .btn.hollow:hover {
    border-color: rgba(255, 255, 255, 0.5);
    background-color: rgba(255, 255, 255, 0.1);
}

/* ==========================================================================
   BADGE / PILL COMPONENT
   ========================================================================== */

/* ---------------------------------------------------------------------
   Base Badge Styles
   --------------------------------------------------------------------- */

.badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.125rem 0.5rem;
    font-family: var(--font-body);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    line-height: var(--leading-normal);
    border-radius: var(--radius-full);
    white-space: nowrap;
}

.badge svg,
.badge img {
    width: 0.75rem;
    height: 0.75rem;
    flex-shrink: 0;
}

/* Badge sizes */
.badge.sm {
    padding: 0.0625rem 0.375rem;
    font-size: 0.625rem;
}

.badge.lg {
    padding: 0.25rem 0.75rem;
    font-size: var(--text-sm);
}

.badge.lg svg,
.badge.lg img {
    width: 1rem;
    height: 1rem;
}

/* ---------------------------------------------------------------------
   Filled Badge Variants
   --------------------------------------------------------------------- */

.badge.filled,
.badge {
    background-color: var(--color-surface-alt);
    color: var(--font-color-body);
}

.badge.filled.primary,
.badge.primary {
    background-color: var(--color-primary);
    color: #ffffff;
}

.badge.filled.secondary,
.badge.secondary {
    background-color: var(--color-secondary);
    color: #ffffff;
}

.badge.filled.success,
.badge.success {
    background-color: var(--color-success);
    color: #ffffff;
}

.badge.filled.warning,
.badge.warning {
    background-color: var(--color-warning);
    color: #ffffff;
}

.badge.filled.error,
.badge.error {
    background-color: var(--color-error);
    color: #ffffff;
}

.badge.filled.info,
.badge.info {
    background-color: var(--color-info);
    color: #ffffff;
}

/* ---------------------------------------------------------------------
   Hollow Badge Variants
   --------------------------------------------------------------------- */

.badge.hollow {
    background-color: transparent;
    border: 1.5px solid var(--color-border);
    color: var(--font-color-body);
}

.badge.hollow.primary {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

.badge.hollow.secondary {
    border-color: var(--color-secondary);
    color: var(--color-secondary);
}

.badge.hollow.success {
    border-color: var(--color-success);
    color: var(--color-success);
}

.badge.hollow.warning {
    border-color: var(--color-warning);
    color: var(--color-warning);
}

.badge.hollow.error {
    border-color: var(--color-error);
    color: var(--color-error);
}

.badge.hollow.info {
    border-color: var(--color-info);
    color: var(--color-info);
}

/* ---------------------------------------------------------------------
   Gradient Badge Variants
   --------------------------------------------------------------------- */

.badge.gradient {
    background: linear-gradient(
        135deg,
        var(--color-primary),
        var(--color-secondary),
        var(--color-primary-400),
        var(--color-primary)
    );
    background-size: 300% 300%;
    animation: gradient-shift 6s ease infinite;
    color: #ffffff;
}

.badge.gradient.secondary {
    background: linear-gradient(
        135deg,
        var(--color-secondary),
        var(--color-tertiary),
        var(--color-secondary-400),
        var(--color-secondary)
    );
    background-size: 300% 300%;
}

.badge.hollow.gradient {
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 6s ease infinite;
    border: 1.5px solid transparent;
    color: var(--color-primary);
}

.badge.hollow.gradient.secondary {
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    color: var(--color-secondary);
}

/* ---------------------------------------------------------------------
   Soft/Subtle Badge Variants (light background, colored text)
   --------------------------------------------------------------------- */

.badge.soft.primary {
    background-color: rgba(var(--color-primary-rgb), 0.1);
    color: var(--color-primary);
}

.badge.soft.secondary {
    background-color: rgba(var(--color-secondary-rgb), 0.1);
    color: var(--color-secondary);
}

.badge.soft.success {
    background-color: rgba(34, 197, 94, 0.1);
    color: var(--color-success);
}

.badge.soft.warning {
    background-color: rgba(var(--color-tertiary-rgb), 0.1);
    color: var(--color-warning);
}

.badge.soft.error {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--color-error);
}

.badge.soft.info {
    background-color: rgba(59, 130, 246, 0.1);
    color: var(--color-info);
}

/* Deprecate old table-badge in favor of badge */
.table-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.5rem;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    border-radius: var(--radius-full);
}

.table-badge.success {
    background-color: rgba(34, 197, 94, 0.1);
    color: var(--color-success);
}

.table-badge.warning {
    background-color: rgba(var(--color-tertiary-rgb), 0.1);
    color: var(--color-warning);
}

.table-badge.error {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--color-error);
}

.table-badge.info {
    background-color: rgba(59, 130, 246, 0.1);
    color: var(--color-info);
}

/* ---------------------------------------------------------------------
   Table Container (Horizontal scroll on mobile)
   Wrap tables in .table-container for automatic horizontal scrolling
   on smaller screens without causing page overflow.
   --------------------------------------------------------------------- */

.table-container {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.table-container table {
    margin-bottom: 0;
}

/* ---------------------------------------------------------------------
   Responsive Table (Stacked on Mobile)
   Alternative approach: stack rows vertically on mobile.
   Add .responsive class to table element.
   --------------------------------------------------------------------- */

table.responsive {
    width: 100%;
}

@media (max-width: 640px) {
    table.responsive,
    table.responsive thead,
    table.responsive tbody,
    table.responsive th,
    table.responsive td,
    table.responsive tr {
        display: block;
    }

    table.responsive thead {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }

    table.responsive tbody tr {
        margin-bottom: var(--space-4);
        padding: var(--space-4);
        background-color: var(--color-surface);
        border-radius: var(--radius-lg);
        border: 1px solid var(--color-border-light);
    }

    table.responsive td {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--space-2) 0;
        border-bottom: 1px solid var(--color-border-light);
        text-align: right;
    }

    table.responsive td:last-child {
        border-bottom: none;
    }

    table.responsive td::before {
        content: attr(data-label);
        font-weight: var(--font-semibold);
        font-size: var(--text-xs);
        text-transform: uppercase;
        letter-spacing: var(--tracking-wide);
        color: var(--font-color-caption);
        text-align: left;
        margin-right: var(--space-4);
    }
}

/* ---------------------------------------------------------------------
   Fieldset & Legend
   --------------------------------------------------------------------- */

fieldset {
    margin: 0 0 var(--space-4) 0;
    padding: var(--space-6);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
}

legend {
    padding: 0 var(--space-2);
    font-family: var(--font-heading);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--font-color-heading);
}

/* ---------------------------------------------------------------------
   Details & Summary
   Apple HIG: Disclosure controls with smooth animations
   --------------------------------------------------------------------- */

details {
    margin-bottom: var(--space-4);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
}

summary {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-4);
    min-height: 2.75rem;
    font-family: var(--font-body);
    font-weight: var(--font-medium);
    color: var(--font-color-heading);
    list-style: none;
    cursor: pointer;
    background-color: var(--color-surface);
    border-radius: var(--radius-lg);
    transition: background-color 0.2s var(--easing-apple);
    -webkit-user-select: none;
    user-select: none;
}

/* Remove default marker */
summary::-webkit-details-marker {
    display: none;
}

summary::marker {
    display: none;
    content: '';
}

/* Custom disclosure indicator (chevron) */
summary::before {
    content: '';
    flex-shrink: 0;
    width: 1.25rem;
    height: 1.25rem;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' d='M9 5l7 7-7 7'/%3e%3c/svg%3e");
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    transition: transform 0.3s var(--easing-spring);
}

summary:hover {
    background-color: var(--color-surface-alt);
}

summary:active {
    background-color: var(--color-border-light);
}

summary:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.25);
}

/* Open state */
details[open] summary {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    border-bottom: 1px solid var(--color-border);
}

details[open] summary::before {
    transform: rotate(90deg);
}

/* Content wrapper for animation */
details .details-content {
    display: grid;
    grid-template-rows: 0fr;
    transition: grid-template-rows 0.3s var(--easing-apple);
}

details[open] .details-content {
    grid-template-rows: 1fr;
}

details .details-content > * {
    overflow: hidden;
}

details .details-content-inner {
    padding: var(--space-4);
}

/* Fallback for content without wrapper */
details > *:not(summary):not(.details-content) {
    padding: var(--space-4);
}

/* Dark mode chevron */
.dark summary::before {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2394a3b8' stroke-width='2'%3e%3cpath stroke-linecap='round' stroke-linejoin='round' d='M9 5l7 7-7 7'/%3e%3c/svg%3e");
}

/* Compact variant */
details.compact summary {
    padding: var(--space-3);
    min-height: 2.25rem;
    font-size: var(--text-sm);
}

details.compact summary::before {
    width: 1rem;
    height: 1rem;
}

details.compact .details-content-inner,
details.compact > *:not(summary):not(.details-content) {
    padding: var(--space-3);
}

/* Flush variant (no border, fits inside cards) */
details.flush {
    border: none;
    border-radius: 0;
    margin-bottom: 0;
}

details.flush summary {
    background-color: transparent;
    border-radius: 0;
}

details.flush:not(:last-child) summary,
details.flush[open] summary {
    border-bottom: 1px solid var(--color-border-light);
}

details.flush summary:hover {
    background-color: var(--color-surface);
}

/* Group of details (accordion-like) */
.details-group {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    overflow: hidden;
}

.details-group details {
    margin-bottom: 0;
    border: none;
    border-radius: 0;
}

.details-group details:not(:last-child) {
    border-bottom: 1px solid var(--color-border);
}

.details-group details summary {
    border-radius: 0;
}

.details-group details:first-child summary {
    border-top-left-radius: calc(var(--radius-lg) - 1px);
    border-top-right-radius: calc(var(--radius-lg) - 1px);
}

.details-group details:last-child:not([open]) summary {
    border-bottom-left-radius: calc(var(--radius-lg) - 1px);
    border-bottom-right-radius: calc(var(--radius-lg) - 1px);
}

/* ==========================================================================
   4. FORM CONTROLS
   ========================================================================== */

/* ---------------------------------------------------------------------
   Labels
   --------------------------------------------------------------------- */

label {
    display: block;
    margin-bottom: var(--space-2);
    font-family: var(--font-body);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    line-height: var(--leading-normal);
    color: var(--font-color-heading);
}

label.required::after,
.input-group:has(input:required, textarea:required, select:required) label::after {
    content: ' *';
    color: var(--color-error);
    font-weight: var(--font-bold);
    font-size: var(--text-base);
    vertical-align: middle;
}

/* ---------------------------------------------------------------------
   Base Input Styles
   --------------------------------------------------------------------- */

input,
textarea,
select {
    display: block;
    width: 100%;
    margin-bottom: var(--space-4);
    padding: var(--input-padding-y) var(--input-padding-x);
    font-family: var(--font-body);
    font-size: var(--input-font-size);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    color: var(--font-color-heading);
    border: var(--input-border-width) solid var(--color-border);
    border-radius: var(--input-radius);
    background-color: var(--color-background);
    transition: border-color 0.3s var(--easing-apple), box-shadow 0.3s var(--easing-apple), background-color 0.3s var(--easing-apple);
}

input::placeholder,
textarea::placeholder {
    color: var(--font-color-caption);
    opacity: 1;
}

input:hover,
textarea:hover {
    border-color: var(--color-border-hover);
}

select:hover {
    border-color: var(--color-border-hover);
}

input:focus,
textarea:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.15);
}

select:focus {
    outline: none;
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.15);
}

input:disabled,
textarea:disabled,
select:disabled {
    cursor: not-allowed;
    opacity: var(--disabled-opacity);
}

/* Remove default appearance */
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"],
input[type="tel"],
input[type="url"],
input[type="search"],
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
    -webkit-appearance: none;
    appearance: none;
}

/* Normalize date/time input heights */
input[type="date"],
input[type="time"],
input[type="datetime-local"] {
    height: calc(var(--leading-normal) * 1em + var(--input-padding-y) * 2 + var(--input-border-width) * 2);
    line-height: var(--leading-normal);
}

/* ---------------------------------------------------------------------
   Textarea
   --------------------------------------------------------------------- */

textarea {
    min-height: 6rem;
    line-height: var(--leading-relaxed);
    resize: vertical;
}

/* ---------------------------------------------------------------------
   Select
   --------------------------------------------------------------------- */

select {
    padding-right: 2.5rem;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.25em 1.25em;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer;
}

/* ---------------------------------------------------------------------
   Checkbox & Radio
   --------------------------------------------------------------------- */

input[type="checkbox"],
input[type="radio"] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    width: 1.125rem !important;
    min-width: 1.125rem;
    height: 1.125rem;
    margin: 0;
    margin-bottom: 0;
    padding: 0;
    background-color: var(--color-background);
    border: 1.5px solid var(--color-border);
    border-radius: var(--radius-sm);
    vertical-align: middle;
    cursor: pointer;
    transition: all 0.15s var(--easing-apple);
    -webkit-appearance: none;
    appearance: none;
}

input[type="radio"] {
    border-radius: var(--radius-full);
}

input[type="checkbox"]:disabled,
input[type="radio"]:disabled {
    cursor: not-allowed;
    opacity: var(--disabled-opacity);
}

/* When inside a label, the label handles opacity - prevent double dimming */
.checkbox-label input[type="checkbox"]:disabled,
.radio-label input[type="radio"]:disabled {
    opacity: 1;
}



input[type="checkbox"]:checked,
input[type="radio"]:checked {
    background-color: var(--color-primary);
    border-color: var(--color-primary);
}

input[type="checkbox"]:focus,
input[type="radio"]:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.25);
}

input[type="checkbox"]:checked::before {
    content: '';
    width: 0.625rem;
    height: 0.625rem;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    background-size: contain;
}

input[type="radio"]:checked::before {
    content: '';
    width: 0.5rem;
    height: 0.5rem;
    background-color: white;
    border-radius: var(--radius-full);
}

/* ---------------------------------------------------------------------
   Gradient Checkbox & Radio Button
   Usage: <input type="checkbox" class="gradient">
          <input type="radio" class="gradient">
   --------------------------------------------------------------------- */

input[type="checkbox"].gradient,
input[type="radio"].gradient {
    border: 2px solid transparent;
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 4s ease infinite;
    box-shadow: 0 0 8px -2px rgba(var(--color-primary-rgb), 0.3), 0 0 12px -2px rgba(var(--color-secondary-rgb), 0.15);
}

input[type="checkbox"].gradient:hover,
input[type="radio"].gradient:hover {
    animation: gradient-shift 2s ease infinite;
    box-shadow: 0 0 10px -2px rgba(var(--color-primary-rgb), 0.4), 0 0 16px -2px rgba(var(--color-secondary-rgb), 0.25);
}

input[type="checkbox"].gradient:focus,
input[type="radio"].gradient:focus {
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.25), 0 0 12px -2px rgba(var(--color-primary-rgb), 0.4), 0 0 16px -2px rgba(var(--color-secondary-rgb), 0.25);
}

input[type="checkbox"].gradient:checked,
input[type="radio"].gradient:checked {
    border: 2px solid transparent;
    background:
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 300% 300%;
    animation: gradient-shift 4s ease infinite;
}

input[type="checkbox"].gradient:checked:hover,
input[type="radio"].gradient:checked:hover {
    animation: gradient-shift 2s ease infinite;
}

/* Secondary gradient variant */
input[type="checkbox"].gradient.secondary,
input[type="radio"].gradient.secondary {
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    box-shadow: 0 0 8px -2px rgba(var(--color-secondary-rgb), 0.3), 0 0 12px -2px rgba(var(--color-tertiary-rgb), 0.15);
}

input[type="checkbox"].gradient.secondary:hover,
input[type="radio"].gradient.secondary:hover {
    box-shadow: 0 0 10px -2px rgba(var(--color-secondary-rgb), 0.4), 0 0 16px -2px rgba(var(--color-tertiary-rgb), 0.25);
}

input[type="checkbox"].gradient.secondary:focus,
input[type="radio"].gradient.secondary:focus {
    box-shadow: 0 0 0 3px rgba(var(--color-secondary-rgb), 0.25), 0 0 12px -2px rgba(var(--color-secondary-rgb), 0.4), 0 0 16px -2px rgba(var(--color-tertiary-rgb), 0.25);
}

input[type="checkbox"].gradient.secondary:checked,
input[type="radio"].gradient.secondary:checked {
    background:
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 300% 300%;
}

/* Disabled gradient states */
input[type="checkbox"].gradient:disabled,
input[type="radio"].gradient:disabled {
    box-shadow: none;
    animation: none;
}



/* ---------------------------------------------------------------------
   Toggle Switch (styled checkbox)
   Usage: <input type="checkbox" class="toggle">
   --------------------------------------------------------------------- */

input[type="checkbox"].toggle {
    width: 3.6rem !important;
    min-width: 3.6rem;
    height: 1.625rem;
    padding: 0.1875rem;
    border-radius: var(--radius-full);
    background-color: var(--color-border);
    border: none;
    position: relative;
    transition: background 0.3s var(--easing-spring);
}

input[type="checkbox"].toggle::before {
    content: '';
    position: absolute;
    left: 0.1875rem;
    top: 50%;
    transform: translateY(-50%);
    width: 2rem;
    height: 1.25rem;
    background-color: white;
    border-radius: var(--radius-full);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 0 0 0.5px rgba(0, 0, 0, 0.04);
    transition: left 0.3s var(--easing-spring);
}

input[type="checkbox"].toggle:checked {
    background-color: var(--color-primary);
}

input[type="checkbox"].toggle:checked::before {
    left: calc(100% - 2.1875rem);
    background-color: white;
    background-image: none;
}

input[type="checkbox"].toggle:focus {
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.25);
}

input[type="checkbox"].toggle.secondary:checked {
    background-color: var(--color-secondary);
}

/* Small toggle - maintains 44px touch target via padding */
input[type="checkbox"].toggle.sm {
    width: 2.7rem !important;
    min-width: 2.7rem;
    height: 1.375rem;
    padding: 0.1875rem;
}

input[type="checkbox"].toggle.sm::before {
    left: 0.1875rem;
    width: 1.4rem;
    height: 1rem;
}

input[type="checkbox"].toggle.sm:checked::before {
    left: calc(100% - 1.5875rem);
}

/* Gradient toggle - pre-set animation in paused state so it's ready on check */
input[type="checkbox"].toggle.gradient {
    background:
        linear-gradient(var(--color-border), var(--color-border)),
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        );
    background-size: 100% 100%, 300% 300%;
    box-shadow: none;
    animation: gradient-shift 4s ease infinite paused;
}

input[type="checkbox"].toggle.gradient:checked {
    background: linear-gradient(
        135deg,
        var(--color-primary),
        var(--color-secondary),
        var(--color-primary-400),
        var(--color-tertiary),
        var(--color-primary)
    );
    background-size: 300% 300%;
    animation-play-state: running;
}

input[type="checkbox"].toggle.gradient.secondary {
    background:
        linear-gradient(var(--color-border), var(--color-border)),
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        );
    background-size: 100% 100%, 300% 300%;
}

input[type="checkbox"].toggle.gradient.secondary:checked {
    background: linear-gradient(
        135deg,
        var(--color-secondary),
        var(--color-tertiary),
        var(--color-secondary-400),
        var(--color-primary-400),
        var(--color-secondary)
    );
    background-size: 300% 300%;
    animation-play-state: running;
}

/* ---------------------------------------------------------------------
   Range Input
   --------------------------------------------------------------------- */

input[type="range"] {
    height: 0.5rem;
    padding: 0;
    background: var(--color-border);
    border: none;
    border-radius: var(--radius-sm);
    cursor: pointer;
}

input[type="range"]::-webkit-slider-thumb {
    width: 1.25rem;
    height: 1.25rem;
    background: var(--color-primary);
    border-radius: var(--radius-full);
    cursor: pointer;
    transition: transform var(--transition-fast);
    -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.1);
}

input[type="range"]:focus {
    box-shadow: none;
}

/* ---------------------------------------------------------------------
   File Input
   --------------------------------------------------------------------- */

input[type="file"] {
    padding: var(--space-2);
    cursor: pointer;
}

input[type="file"]::file-selector-button {
    margin-right: var(--space-3);
    padding: var(--space-2) var(--space-4);
    font-family: var(--font-body);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    background-color: var(--color-primary);
    color: #ffffff;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: background-color var(--transition-fast);
}

input[type="file"]::file-selector-button:hover {
    background-color: var(--color-primary-600);
}

/* ---------------------------------------------------------------------
   Input Variants: Hollow
   --------------------------------------------------------------------- */

input.hollow,
textarea.hollow,
select.hollow {
    border: 2px solid var(--color-primary);
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    transition: box-shadow 0.3s ease, border-color 0s ease;
}

input.hollow:hover,
textarea.hollow:hover,
select.hollow:hover {
    border-color: var(--color-primary-600);
}

input.hollow:focus,
textarea.hollow:focus,
select.hollow:focus {
    outline: none;
    border-color: transparent;
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 3s ease infinite;
    box-shadow: 0 0 12px -4px rgba(var(--color-primary-rgb), 0.4), 0 0 20px -4px rgba(var(--color-secondary-rgb), 0.2);
}

input.hollow.secondary,
textarea.hollow.secondary,
select.hollow.secondary {
    border: 2px solid var(--color-secondary);
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
}

input.hollow.secondary:hover,
textarea.hollow.secondary:hover,
select.hollow.secondary:hover {
    border-color: var(--color-secondary-400);
}

input.hollow.secondary:focus,
textarea.hollow.secondary:focus,
select.hollow.secondary:focus {
    outline: none;
    border-color: transparent;
    background:
        linear-gradient(var(--color-background), var(--color-background)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 3s ease infinite;
    box-shadow: 0 0 12px -4px rgba(var(--color-secondary-rgb), 0.4), 0 0 20px -4px rgba(var(--color-tertiary-rgb), 0.2);
}

/* ---------------------------------------------------------------------
   Input Variants: Gradient (Always Animated)

   Uses @property --gradient-opacity for smooth fade transitions.
   To fade out: element.classList.add('gradient-out')
   Then on transitionend, remove both classes.
   --------------------------------------------------------------------- */

input.gradient,
textarea.gradient,
select.gradient {
    --gradient-opacity: 1;
    --gradient-border-color: transparent;
    border: var(--input-border-width) solid var(--gradient-border-color);
    background-color: var(--color-background);
    background-image:
        linear-gradient(var(--color-background), var(--color-background)),
        linear-gradient(
            135deg,
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-tertiary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity))
        );
    background-origin: padding-box, border-box;
    background-clip: padding-box, border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 4s ease infinite;
    box-shadow:
        0 0 12px -4px rgba(var(--color-primary-rgb), calc(0.3 * var(--gradient-opacity))),
        0 0 20px -4px rgba(var(--color-secondary-rgb), calc(0.15 * var(--gradient-opacity)));
    transition: --gradient-opacity 0.5s ease, --gradient-border-color 0.5s ease;
}

.dark input.gradient,
.dark textarea.gradient,
.dark select.gradient {
    --gradient-border-color--dark: transparent;
    border: var(--input-border-width) solid var(--gradient-border-color--dark);
    transition: --gradient-opacity 0.5s ease, --gradient-border-color--dark 0.5s ease;
}

input.gradient:hover,
textarea.gradient:hover,
select.gradient:hover {
    background-image:
        linear-gradient(var(--color-background), var(--color-background)),
        linear-gradient(
            135deg,
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-tertiary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity))
        );
    animation: gradient-shift 2s ease infinite;
    box-shadow:
        0 0 16px -4px rgba(var(--color-primary-rgb), calc(0.4 * var(--gradient-opacity))),
        0 0 24px -4px rgba(var(--color-secondary-rgb), calc(0.25 * var(--gradient-opacity)));
}

input.gradient:focus,
textarea.gradient:focus,
select.gradient:focus {
    outline: none;
    background-image:
        linear-gradient(var(--color-background), var(--color-background)),
        linear-gradient(
            135deg,
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-tertiary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity))
        );
    animation: gradient-shift 2s ease infinite;
    box-shadow:
        0 0 20px -4px rgba(var(--color-primary-rgb), calc(0.5 * var(--gradient-opacity))),
        0 0 28px -4px rgba(var(--color-secondary-rgb), calc(0.3 * var(--gradient-opacity))),
        0 0 0 3px rgba(var(--color-primary-rgb), calc(0.15 * var(--gradient-opacity)));
}

/* Fade out state - transition opacity to 0 */
input.gradient.gradient-out,
textarea.gradient.gradient-out,
select.gradient.gradient-out {
    --gradient-opacity: 0;
    --gradient-border-color: var(--color-border);
}

.dark input.gradient.gradient-out,
.dark textarea.gradient.gradient-out,
.dark select.gradient.gradient-out {
    --gradient-opacity: 0;
    --gradient-border-color--dark: var(--color-border);
}

input.gradient.secondary,
textarea.gradient.secondary,
select.gradient.secondary {
    background-image:
        linear-gradient(var(--color-background), var(--color-background)),
        linear-gradient(
            135deg,
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-tertiary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity))
        );
    animation: gradient-shift 4s ease infinite;
    box-shadow:
        0 0 12px -4px rgba(var(--color-secondary-rgb), calc(0.3 * var(--gradient-opacity))),
        0 0 20px -4px rgba(var(--color-tertiary-rgb), calc(0.15 * var(--gradient-opacity)));
}

input.gradient.secondary:hover,
textarea.gradient.secondary:hover,
select.gradient.secondary:hover {
    background-image:
        linear-gradient(var(--color-background), var(--color-background)),
        linear-gradient(
            135deg,
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-tertiary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity))
        );
    animation: gradient-shift 2s ease infinite;
    box-shadow:
        0 0 16px -4px rgba(var(--color-secondary-rgb), calc(0.4 * var(--gradient-opacity))),
        0 0 24px -4px rgba(var(--color-tertiary-rgb), calc(0.25 * var(--gradient-opacity)));
}

input.gradient.secondary:focus,
textarea.gradient.secondary:focus,
select.gradient.secondary:focus {
    outline: none;
    background-image:
        linear-gradient(var(--color-background), var(--color-background)),
        linear-gradient(
            135deg,
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-tertiary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity)),
            rgba(var(--color-primary-rgb), var(--gradient-opacity)),
            rgba(var(--color-secondary-rgb), var(--gradient-opacity))
        );
    animation: gradient-shift 2s ease infinite;
    box-shadow:
        0 0 20px -4px rgba(var(--color-secondary-rgb), calc(0.5 * var(--gradient-opacity))),
        0 0 28px -4px rgba(var(--color-tertiary-rgb), calc(0.3 * var(--gradient-opacity))),
        0 0 0 3px rgba(var(--color-secondary-rgb), calc(0.15 * var(--gradient-opacity)));
}

/* ---------------------------------------------------------------------
   Input Validation States
   --------------------------------------------------------------------- */

input.input-error,
textarea.input-error,
select.input-error {
    border-color: var(--color-error) !important;
}

input.input-error:focus,
textarea.input-error:focus,
select.input-error:focus {
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.15) !important;
    animation: none;
    background: var(--color-background);
    border: 2px solid var(--color-error);
}

input.input-success,
textarea.input-success,
select.input-success {
    border-color: var(--color-success) !important;
}

input.input-success:focus,
textarea.input-success:focus,
select.input-success:focus {
    box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.15) !important;
    animation: none;
    background: var(--color-background);
    border: 2px solid var(--color-success);
}

.input-hint {
    font-size: var(--text-xs);
    color: var(--font-color-caption);
    margin-top: var(--space-2);
}

.error-message {
    font-size: var(--text-xs);
    color: var(--color-error);
    margin-top: var(--space-2);
}

/* ---------------------------------------------------------------------
   Input Variants: Gradient (uses animation defined in Keyframes section)
   --------------------------------------------------------------------- */

input.gradient,
textarea.gradient,
select.gradient {
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 4s ease infinite;
}

/* ==========================================================================
   5. BUTTONS
   ========================================================================== */

/* ---------------------------------------------------------------------
   Base Button Styles
   --------------------------------------------------------------------- */

button,
.btn {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--btn-padding-y) var(--btn-padding-x);
    font-family: var(--font-heading);
    font-size: var(--btn-font-size);
    font-weight: var(--btn-font-weight);
    line-height: var(--leading-snug);
    text-decoration: none;
    white-space: nowrap;
    border: none;
    border-radius: var(--btn-radius);
    cursor: pointer;
    user-select: none;
    transition: all var(--transition-base) var(--easing-apple);
}

button:focus-visible,
.btn:focus-visible {
    outline: 2px solid currentColor;
    outline-offset: 2px;
}

button:active,
.btn:active {
    transform: translateY(1px) scale(0.98);
}

button:disabled,
.btn:disabled,
.btn.disabled {
    pointer-events: none;
    cursor: not-allowed;
    opacity: var(--disabled-opacity);
    transform: none;
}

/* ---------------------------------------------------------------------
   Filled Button - Primary (Default)
   --------------------------------------------------------------------- */

.btn.filled,
.btn.filled.primary {
    background-color: var(--color-primary);
    color: #ffffff;
    overflow: hidden;
    isolation: isolate;
    box-shadow: var(--shadow-sm), inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
}

.btn.filled::before,
.btn.filled.primary::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
        135deg,
        var(--color-primary),
        var(--color-secondary),
        var(--color-primary-400),
        var(--color-primary)
    );
    background-size: 300% 300%;
    opacity: 0;
    transition: opacity var(--transition-gradient);
    z-index: -1;
}

.btn.filled:hover::before,
.btn.filled.primary:hover::before {
    opacity: 1;
    animation: gradient-shift 3s ease infinite;
}

.btn.filled:hover,
.btn.filled.primary:hover {
    box-shadow: var(--shadow-md), inset 0 1px 0 0 rgba(255, 255, 255, 0.15);
}

.btn.filled:active,
.btn.filled.primary:active {
    box-shadow: var(--shadow-sm), inset 0 2px 4px 0 rgba(0, 0, 0, 0.1);
}

.btn.filled:disabled::before,
.btn.filled.primary:disabled::before {
    display: none;
}

/* ---------------------------------------------------------------------
   Filled Button - Secondary
   --------------------------------------------------------------------- */

.btn.filled.secondary {
    background-color: var(--color-secondary);
    color: #ffffff;
}

.btn.filled.secondary::before {
    background: linear-gradient(
        135deg,
        var(--color-secondary),
        var(--color-tertiary),
        var(--color-secondary-400),
        var(--color-secondary)
    );
    background-size: 300% 300%;
}

/* ---------------------------------------------------------------------
   Filled Button - Always Gradient
   --------------------------------------------------------------------- */

.btn.filled.gradient {
    background: linear-gradient(
        135deg,
        var(--color-primary),
        var(--color-secondary),
        var(--color-primary-400),
        var(--color-primary)
    );
    background-size: 300% 300%;
    animation: gradient-shift 4s ease infinite;
    color: #ffffff;
}

.btn.filled.gradient::before {
    display: none;
}

.btn.filled.gradient:hover {
    animation: gradient-shift 2s ease infinite;
    box-shadow: 0 4px 15px -3px rgba(var(--color-primary-rgb), 0.5), 0 4px 6px -4px rgba(var(--color-secondary-rgb), 0.4);
}

.btn.filled.gradient.secondary {
    background: linear-gradient(
        135deg,
        var(--color-secondary),
        var(--color-tertiary),
        var(--color-secondary-400),
        var(--color-secondary)
    );
    background-size: 300% 300%;
}

/* ---------------------------------------------------------------------
   Hollow Button - Primary (Default)
   --------------------------------------------------------------------- */

.btn.hollow,
.btn.hollow.primary {
    border: 2px solid transparent;
    padding: calc(var(--btn-padding-y) - 2px) calc(var(--btn-padding-x) - 2px);
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(135deg, var(--color-primary), var(--color-primary)) border-box;
    color: var(--color-primary);
    transition: all var(--transition-slow);
}

.dark .btn.hollow {
    color: var(--font-color-body);
}

.btn.hollow:hover,
.btn.hollow.primary:hover {
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 3s ease infinite;
}

/* ---------------------------------------------------------------------
   Hollow Button - Secondary
   --------------------------------------------------------------------- */

.btn.hollow.secondary {
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(135deg, var(--color-secondary), var(--color-secondary)) border-box;
    color: var(--color-secondary);
}

.dark .btn.hollow.secondary {
    color: var(--font-color-body);
}

.btn.hollow.secondary:hover {
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
}

/* ---------------------------------------------------------------------
   Hollow Button - Always Gradient
   --------------------------------------------------------------------- */

.btn.hollow.gradient,
.btn.hollow.gradient.primary {
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    color: var(--color-primary);
    animation: gradient-shift 4s ease infinite;
    box-shadow: 0 0 12px -4px rgba(var(--color-primary-rgb), 0.4), 0 0 20px -4px rgba(var(--color-secondary-rgb), 0.2);
}

.btn.hollow.gradient:hover,
.btn.hollow.gradient.primary:hover {
    animation: gradient-shift 2s ease infinite;
    box-shadow: 0 0 16px -4px rgba(var(--color-primary-rgb), 0.5), 0 0 24px -4px rgba(var(--color-secondary-rgb), 0.3), 0 4px 8px -4px rgba(0, 0, 0, 0.1);
}

.btn.hollow.gradient.secondary {
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    color: var(--color-secondary);
    box-shadow: 0 0 12px -4px rgba(var(--color-secondary-rgb), 0.4), 0 0 20px -4px rgba(var(--color-tertiary-rgb), 0.2);
}

.btn.hollow.gradient.secondary:hover {
    box-shadow: 0 0 16px -4px rgba(var(--color-secondary-rgb), 0.5), 0 0 24px -4px rgba(var(--color-tertiary-rgb), 0.3), 0 4px 8px -4px rgba(0, 0, 0, 0.1);
}

/* ---------------------------------------------------------------------
   Disabled Button States
   Apple HIG: Use opacity on entire button, maintain original style
   --------------------------------------------------------------------- */

.btn.filled:disabled,
.btn.filled.disabled {
    box-shadow: none;
}

.btn.hollow:disabled,
.btn.hollow.disabled {
    box-shadow: none;
}

.btn.hollow.gradient:disabled,
.btn.hollow.gradient.disabled {
    box-shadow: none;
    animation: none;
}

/* ---------------------------------------------------------------------
   Button Sizes
   --------------------------------------------------------------------- */

.btn.sm {
    padding: 0.5rem 0.75rem;
    font-size: 0.75rem;
    line-height: 1rem;
    border-radius: var(--radius-md);
}

.btn.sm.hollow {
    padding: calc(0.5rem - 2px) calc(0.75rem - 2px);
}

.btn.lg {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    line-height: 1.5rem;
    border-radius: var(--radius-xl);
}

.btn.lg.hollow {
    padding: calc(0.75rem - 2px) calc(1.5rem - 2px);
}

/* ---------------------------------------------------------------------
   Button with Icon
   --------------------------------------------------------------------- */

.btn svg,
.btn img {
    flex-shrink: 0;
    width: 1em;
    height: 1em;
}

.btn.icon-only {
    padding: var(--btn-padding-y);
    aspect-ratio: 1;
}

/* ==========================================================================
   6. ALERTS
   ========================================================================== */

/* ---------------------------------------------------------------------
   Base Alert Styles
   --------------------------------------------------------------------- */

.alert {
    position: relative;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: var(--space-4);
    padding: var(--alert-padding-y) var(--alert-padding-x);
    font-family: var(--font-body);
    font-size: var(--alert-font-size);
    font-weight: var(--font-normal);
    line-height: var(--leading-normal);
    border-radius: var(--alert-radius);
    transition: all var(--transition-base) var(--easing-smooth);
}

.alert-icon {
    flex-shrink: 0;
    width: 1.25rem;
    height: 1.25rem;
    margin-top: 0.125rem;
}

.alert-content {
    flex: 1;
    min-width: 0;
}

.alert-title {
    margin-bottom: 0.25rem;
    font-weight: var(--font-semibold);
}

.alert-description {
    opacity: 0.9;
}

/* ---------------------------------------------------------------------
   Filled Alert - Success
   --------------------------------------------------------------------- */

.alert.filled.success {
    background: linear-gradient(
        135deg,
        var(--color-success),
        var(--color-success-dark),
        var(--color-success),
        var(--color-success-dark),
        var(--color-success)
    );
    background-size: 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(34, 197, 94, 0.2), 0 2px 4px -2px rgba(34, 197, 94, 0.1);
}

/* ---------------------------------------------------------------------
   Filled Alert - Warning
   --------------------------------------------------------------------- */

.alert.filled.warning {
    background: linear-gradient(
        135deg,
        var(--color-warning),
        var(--color-warning-dark),
        var(--color-warning),
        var(--color-warning-dark),
        var(--color-warning)
    );
    background-size: 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(var(--color-tertiary-rgb), 0.2), 0 2px 4px -2px rgba(var(--color-tertiary-rgb), 0.1);
}

/* ---------------------------------------------------------------------
   Filled Alert - Error
   --------------------------------------------------------------------- */

.alert.filled.error {
    background: linear-gradient(
        135deg,
        var(--color-error),
        var(--color-error-dark),
        var(--color-error),
        var(--color-error-dark),
        var(--color-error)
    );
    background-size: 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(239, 68, 68, 0.2), 0 2px 4px -2px rgba(239, 68, 68, 0.1);
}

/* ---------------------------------------------------------------------
   Filled Alert - Info
   --------------------------------------------------------------------- */

.alert.filled.info {
    background: linear-gradient(
        135deg,
        var(--color-info),
        var(--color-info-dark),
        var(--color-info),
        var(--color-info-dark),
        var(--color-info)
    );
    background-size: 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.2), 0 2px 4px -2px rgba(59, 130, 246, 0.1);
}

/* ---------------------------------------------------------------------
   Filled Alert - Primary
   --------------------------------------------------------------------- */

.alert.filled.primary,
.alert.filled {
    background: linear-gradient(
        135deg,
        var(--color-primary),
        var(--color-secondary),
        var(--color-primary-400),
        var(--color-tertiary),
        var(--color-primary)
    );
    background-size: 300% 300%;
    animation: gradient-shift 6s ease infinite;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(var(--color-primary-rgb), 0.2), 0 2px 4px -2px rgba(var(--color-secondary-rgb), 0.1);
}

.alert.filled.primary:hover,
.alert.filled:hover {
    animation: gradient-shift 3s ease infinite;
}

/* ---------------------------------------------------------------------
   Filled Alert - Secondary
   --------------------------------------------------------------------- */

.alert.filled.secondary {
    background: linear-gradient(
        135deg,
        var(--color-secondary),
        var(--color-tertiary),
        var(--color-secondary-400),
        var(--color-primary-400),
        var(--color-secondary)
    );
    background-size: 300% 300%;
    animation: gradient-shift 6s ease infinite;
    color: #ffffff;
    box-shadow: 0 4px 6px -1px rgba(var(--color-secondary-rgb), 0.2), 0 2px 4px -2px rgba(var(--color-tertiary-rgb), 0.1);
}

.alert.filled.secondary:hover {
    animation: gradient-shift 3s ease infinite;
}

/* ---------------------------------------------------------------------
   Hollow Alert - Success
   --------------------------------------------------------------------- */

.alert.hollow.success {
    border: var(--alert-border-width) solid transparent;
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-success),
            var(--color-success-dark),
            var(--color-success),
            var(--color-success-dark),
            var(--color-success)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: var(--color-success-dark);
    box-shadow: 0 0 12px -4px rgba(34, 197, 94, 0.3), 0 0 20px -4px rgba(34, 197, 94, 0.15);
}

.alert.hollow.success .alert-icon {
    color: var(--color-success);
}

/* ---------------------------------------------------------------------
   Hollow Alert - Warning
   --------------------------------------------------------------------- */

.alert.hollow.warning {
    border: var(--alert-border-width) solid transparent;
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-warning),
            var(--color-warning-dark),
            var(--color-warning),
            var(--color-warning-dark),
            var(--color-warning)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: var(--color-warning-dark);
    box-shadow: 0 0 12px -4px rgba(var(--color-tertiary-rgb), 0.3), 0 0 20px -4px rgba(var(--color-tertiary-rgb), 0.15);
}

.alert.hollow.warning .alert-icon {
    color: var(--color-warning);
}

/* ---------------------------------------------------------------------
   Hollow Alert - Error
   --------------------------------------------------------------------- */

.alert.hollow.error {
    border: var(--alert-border-width) solid transparent;
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-error),
            var(--color-error-dark),
            var(--color-error),
            var(--color-error-dark),
            var(--color-error)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: var(--color-error-dark);
    box-shadow: 0 0 12px -4px rgba(239, 68, 68, 0.3), 0 0 20px -4px rgba(239, 68, 68, 0.15);
}

.alert.hollow.error .alert-icon {
    color: var(--color-error);
}

/* ---------------------------------------------------------------------
   Hollow Alert - Info
   --------------------------------------------------------------------- */

.alert.hollow.info {
    border: var(--alert-border-width) solid transparent;
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-info),
            var(--color-info-dark),
            var(--color-info),
            var(--color-info-dark),
            var(--color-info)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 8s ease infinite;
    color: var(--color-info-dark);
    box-shadow: 0 0 12px -4px rgba(59, 130, 246, 0.3), 0 0 20px -4px rgba(59, 130, 246, 0.15);
}

.alert.hollow.info .alert-icon {
    color: var(--color-info);
}

/* ---------------------------------------------------------------------
   Hollow Alert - Primary
   --------------------------------------------------------------------- */

.alert.hollow.primary,
.alert.hollow {
    border: var(--alert-border-width) solid transparent;
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-primary),
            var(--color-secondary),
            var(--color-primary-400),
            var(--color-tertiary),
            var(--color-primary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 6s ease infinite;
    color: var(--color-primary);
    box-shadow: 0 0 12px -4px rgba(var(--color-primary-rgb), 0.3), 0 0 20px -4px rgba(var(--color-secondary-rgb), 0.15);
}

.alert.hollow.primary:hover,
.alert.hollow:hover {
    animation: gradient-shift 3s ease infinite;
}

/* ---------------------------------------------------------------------
   Hollow Alert - Secondary
   --------------------------------------------------------------------- */

.alert.hollow.secondary {
    border: var(--alert-border-width) solid transparent;
    background:
        linear-gradient(var(--color-background, #ffffff), var(--color-background, #ffffff)) padding-box,
        linear-gradient(
            135deg,
            var(--color-secondary),
            var(--color-tertiary),
            var(--color-secondary-400),
            var(--color-primary-400),
            var(--color-secondary)
        ) border-box;
    background-size: 100% 100%, 300% 300%;
    animation: gradient-shift 6s ease infinite;
    color: var(--color-secondary);
    box-shadow: 0 0 12px -4px rgba(var(--color-secondary-rgb), 0.3), 0 0 20px -4px rgba(var(--color-tertiary-rgb), 0.15);
}

.alert.hollow.secondary:hover {
    animation: gradient-shift 3s ease infinite;
}

/* ---------------------------------------------------------------------
   Alert Sizes
   --------------------------------------------------------------------- */

.alert.sm {
    padding: 0.625rem 0.875rem;
    font-size: 0.75rem;
    border-radius: var(--radius-md);
}

.alert.sm .alert-icon {
    width: 1rem;
    height: 1rem;
}

.alert.lg {
    padding: 1.25rem 1.5rem;
    font-size: 1rem;
    border-radius: var(--radius-xl);
}

.alert.lg .alert-icon {
    width: 1.5rem;
    height: 1.5rem;
}

/* ---------------------------------------------------------------------
   Alert Close Button
   --------------------------------------------------------------------- */

.alert-close {
    flex-shrink: 0;
    width: 1.25rem;
    height: 1.25rem;
    margin-left: auto;
    padding: 0;
    color: currentColor;
    background: transparent;
    border: none;
    opacity: 0.7;
    cursor: pointer;
    transition: opacity var(--transition-fast);
}

.alert-close:hover {
    opacity: 1;
}

.alert.filled .alert-close {
    color: #ffffff;
}

/* ---------------------------------------------------------------------
   Dismissible Alert
   --------------------------------------------------------------------- */

.alert.dismissible {
    padding-right: 2.5rem;
}

.alert.dismissible .alert-close {
    position: absolute;
    top: var(--alert-padding-y);
    right: var(--alert-padding-y);
}

/* ==========================================================================
   7. KEYFRAME ANIMATIONS
   Consolidated for performance - GPU-accelerated properties only
   ========================================================================== */

@keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}



@keyframes select-gradient-shift {
    0% { background-position: right 0.75rem center, 0% 0%, 0% 50%; }
    50% { background-position: right 0.75rem center, 0% 0%, 100% 50%; }
    100% { background-position: right 0.75rem center, 0% 0%, 0% 50%; }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ==========================================================================
   8. UTILITY CLASSES
   ========================================================================== */

/* Text Alignment */
.text-left { text-align: left; }
.text-center { text-align: center; }
.text-right { text-align: right; }

/* Font Weights */
.font-light { font-weight: var(--font-light); }
.font-normal { font-weight: var(--font-normal); }
.font-medium { font-weight: var(--font-medium); }
.font-semibold { font-weight: var(--font-semibold); }
.font-bold { font-weight: var(--font-bold); }

/* Font Sizes */
.text-xs { font-size: var(--text-xs); }
.text-sm { font-size: var(--text-sm); }
.text-base { font-size: var(--text-base); }
.text-lg { font-size: var(--text-lg); }
.text-xl { font-size: var(--text-xl); }
.text-2xl { font-size: var(--text-2xl); }
.text-3xl { font-size: var(--text-3xl); }
.text-4xl { font-size: var(--text-4xl); }

/* Line Heights */
.leading-tight { line-height: var(--leading-tight); }
.leading-normal { line-height: var(--leading-normal); }
.leading-relaxed { line-height: var(--leading-relaxed); }

/* Letter Spacing */
.tracking-tight { letter-spacing: var(--tracking-tight); }
.tracking-normal { letter-spacing: var(--tracking-normal); }
.tracking-wide { letter-spacing: var(--tracking-wide); }

/* Text Colors */
.text-muted,
.caption {
    color: var(--font-color-caption);
}

/* ==========================================================================
   9. LAYOUT COMPONENTS
   ========================================================================== */

/* ---------------------------------------------------------------------
   Form Layout: Input Grid
   --------------------------------------------------------------------- */

.input-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem 1.5rem;
    margin-bottom: var(--space-4);
}

.input-group {
    display: flex;
    flex-direction: column;
    min-width: 0;
}

.input-group label {
    margin-bottom: var(--space-2);
}

.input-group input,
.input-group textarea,
.input-group select {
    margin-bottom: 0;
}

.input-row {
    display: flex;
    align-items: center;
    gap: var(--space-4);
    margin-bottom: var(--space-4);
}

.input-row:last-child {
    margin-bottom: 0;
}

/* ---------------------------------------------------------------------
   Checkbox & Radio Groups
   --------------------------------------------------------------------- */

.checkbox-group,
.radio-group {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
}

.checkbox-label,
.radio-label {
    display: inline-flex;
    align-items: center;
    gap: var(--space-3);
    min-height: 2.75rem;
    padding: var(--space-2) 0;
    font-size: var(--text-sm);
    font-weight: var(--font-normal);
    cursor: pointer;
}

.checkbox-label:has(input:disabled),
.radio-label:has(input:disabled) {
    opacity: var(--disabled-opacity);
    cursor: not-allowed;
}

.checkbox-label:has(input.toggle.gradient) span {
    margin-bottom: var(--space-2);
}

.checkbox-label input,
.radio-label input {
    width: 1.125rem !important;
    min-width: 1.125rem;
    flex-shrink: 0;
    margin-bottom: 0;
    align-self: center;
}

.checkbox-label input.toggle {
    width: 3.6rem !important;
    min-width: 3.6rem;
}

.checkbox-label input.toggle.sm {
    width: 2.7rem !important;
    min-width: 2.7rem;
}

/* ---------------------------------------------------------------------
   Input with Icon
   --------------------------------------------------------------------- */

.input-with-icon {
    position: relative;
}

.input-with-icon input {
    padding-left: 2.5rem;
}

.input-icon {
    position: absolute;
    left: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--font-color-caption);
    pointer-events: none;
}

/* ---------------------------------------------------------------------
   Divider
   --------------------------------------------------------------------- */

.divider {
    height: 1px;
    background: var(--color-border-light);
    margin: var(--space-8) 0;
}

/* ---------------------------------------------------------------------
   Code Hint / Code Block
   --------------------------------------------------------------------- */

.code-hint {
    margin-top: var(--space-4);
    padding: var(--space-3) var(--space-4);
    background: var(--color-surface-alt);
    border-radius: var(--radius-lg);
    font-family: var(--font-mono);
    font-size: var(--text-xs);
    color: var(--font-color-caption);
    overflow-x: auto;
}

/* ---------------------------------------------------------------------
   Button Row
   --------------------------------------------------------------------- */

.button-row {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-4);
    align-items: center;
    margin-bottom: var(--space-4);
}

@media (max-width: 640px) {
    .button-row {
        flex-direction: column;
        align-items: flex-start;
    }
}

.button-row:last-child {
    margin-bottom: 0;
}

.button-row .label {
    font-size: var(--text-xs);
    font-weight: var(--font-semibold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wider);
    color: var(--font-color-caption);
    min-width: 6rem;
}

/* ---------------------------------------------------------------------
   Card / Section
   --------------------------------------------------------------------- */

.card,
section {
    margin-bottom: var(--space-12);
    padding: var(--space-8);
    background: var(--color-surface);
    border-radius: 1rem;
    border: 1px solid var(--color-border-light);
}

.card h2,
section h2 {
    font-size: var(--text-xl);
    margin-bottom: var(--space-2);
}

/* ---------------------------------------------------------------------
   Modal / Dialog
   Uses native <dialog> element for accessibility and keyboard handling
   --------------------------------------------------------------------- */

dialog.modal {
    position: fixed;
    max-width: min(90vw, 400px);
    padding: 0;
    border: 1px solid var(--color-border);
    border-radius: var(--radius-xl);
    background: var(--color-background);
    color: var(--font-color-body);
    box-shadow:
        0 25px 50px -12px rgba(0, 0, 0, 0.25),
        0 0 0 1px rgba(0, 0, 0, 0.05);
}

dialog.modal[open] {
    display: block;
}

dialog.modal::backdrop {
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
}

/* Modal Header */
.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4) var(--space-6);
    border-bottom: 1px solid var(--color-border-light);
}

.modal-title {
    margin: 0;
    font-family: var(--font-heading);
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--font-color-heading);
}

.modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    padding: 0;
    border: none;
    border-radius: var(--radius-full);
    background: transparent;
    color: var(--font-color-caption);
    cursor: pointer;
    transition: all var(--transition-fast) var(--easing-smooth);
}

.modal-close:hover {
    background: var(--color-surface-alt);
    color: var(--font-color-heading);
}

.modal-close:focus-visible {
    outline: 2px solid var(--color-focus);
    outline-offset: 2px;
}

.modal-close svg {
    width: 1.25rem;
    height: 1.25rem;
}

/* Modal Body */
.modal-body {
    padding: var(--space-6);
}

.modal-body p {
    margin-bottom: var(--space-4);
}

.modal-body p:last-child {
    margin-bottom: 0;
}

/* Modal Footer */
.modal-footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--space-3);
    padding: var(--space-4) var(--space-6);
    border-top: 1px solid var(--color-border-light);
    background: var(--color-surface);
}

/* Modal Sizes */
dialog.modal.sm {
    max-width: min(90vw, 320px);
}

dialog.modal.lg {
    max-width: min(90vw, 560px);
}

/* Modal without header - compact alert style */
dialog.modal.compact {
    text-align: center;
}

dialog.modal.compact .modal-body {
    padding: var(--space-8) var(--space-6) var(--space-4);
}

dialog.modal.compact .modal-footer {
    justify-content: center;
    border-top: none;
    background: transparent;
    padding-top: 0;
}

/* Dark mode */
.dark dialog.modal {
    background: var(--color-background);
    border-color: var(--color-border);
}

.dark dialog.modal::backdrop {
    background: rgba(0, 0, 0, 0.6);
}

.dark .modal-header {
    border-bottom-color: var(--color-border);
}

.dark .modal-footer {
    border-top-color: var(--color-border);
    background: var(--color-surface);
}

.dark .modal-close:hover {
    background: var(--color-surface-alt);
}

/* Animation */
@keyframes modal-fade-in {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

@keyframes backdrop-fade-in {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

dialog.modal[open] {
    animation: modal-fade-in 0.2s var(--easing-apple) forwards;
}

dialog.modal[open]::backdrop {
    animation: backdrop-fade-in 0.2s var(--easing-smooth) forwards;
}

/* ==========================================================================
   10. REDUCED MOTION
   Respect user preferences for reduced motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
